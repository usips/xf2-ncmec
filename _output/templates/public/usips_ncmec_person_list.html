<xf:title>CyberTipline People</xf:title>

<xf:pageaction>
    <xf:button href="{{ link('ncmec-persons/create') }}" icon="add">Add Person</xf:button>
</xf:pageaction>

<div class="block">
    <div class="block-container">
        <xf:if is="$persons is not empty">
            <div class="block-body">
                <xf:datalist>
                    <xf:datarow rowtype="header">
                        <xf:cell>ID</xf:cell>
                        <xf:cell>Name</xf:cell>
                        <xf:cell>Type</xf:cell>
                        <xf:cell>Age</xf:cell>
                        <xf:cell>DOB</xf:cell>
                        <xf:cell>Updated</xf:cell>
                        <xf:cell></xf:cell>
                    </xf:datarow>
                    <xf:foreach loop="$persons" value="$person">
                        <xf:datarow>
                            <xf:cell>{$person.person_id}</xf:cell>
                            <xf:cell>
                                <a href="{{ link('ncmec-persons/view', $person) }}">{{$person.display_name}}</a>
                            </xf:cell>
                            <xf:cell>{{ $person.type ?: 'person' }}</xf:cell>
                            <xf:cell>
                                <xf:if is="$person.age !== null">
                                    {{ $person.age|number }}
                                    <xf:else />
                                    &ndash;
                                </xf:if>
                            </xf:cell>
                            <xf:cell>
                                <xf:if is="$person.date_of_birth">
                                    {{ $person.date_of_birth }}
                                    <xf:else />
                                    &ndash;
                                </xf:if>
                            </xf:cell>
                            <xf:cell>
                                <xf:date time="{$person.last_update_date}" />
                            </xf:cell>
                            <xf:cell class="dataList-cell--action">
                                <xf:button href="{{ link('ncmec-persons/view', $person) }}" size="s">View</xf:button>
                            </xf:cell>
                        </xf:datarow>
                    </xf:foreach>
                </xf:datalist>
            </div>

            <div class="block-footer block-footer--split">
                <span class="block-footer-counter">{{ display_totals($persons, $total) }}</span>
                <span class="block-footer-controls">
                    <xf:button href="{{ link('ncmec-persons') }}" size="s" icon="refresh" />
                </span>
            </div>

            <xf:pagenav page="$page" perpage="$perPage" total="$total" link="ncmec-persons" />
            <xf:else />
            <div class="block-body block-row">No records found.</div>
        </xf:if>
    </div>
</div>