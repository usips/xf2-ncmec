<xf:title>{{ phrase('usips_ncmec_incidents') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('ncmec-incidents/create') }}" icon="add">
		{{ phrase('usips_ncmec_create_incident') }}
	</xf:button>
</xf:pageaction>

<xf:form action="{{ link('ncmec-incidents/assign-case') }}" class="block" data-xf-init="select-plus"
	data-sp-checkbox="input[name='incident_ids[]']" data-sp-container=".dataList-row">
	<div class="block-outer">
		<xf:macro template="filter_macros" name="quick_filter" arg-key="incidents" arg-class="block-outer-opposite" />
	</div>
	<div class="block-container">
		<h2 class="block-tabHeader tabs hScroller" data-xf-init="h-scroller">
			<span class="hScroller-scroll">
				<xf:foreach loop="$tabs" key="$tabState" value="$tabLabel">
					<a href="{{ link('ncmec-incidents', null, {'state': $tabState}) }}"
						class="tabs-tab {{ $tabState == $state ? 'is-active' : '' }}">{$tabLabel}</a>
				</xf:foreach>
			</span>
		</h2>
		<div class="block-body">
			<xf:if is="$incidents is not empty">
				<xf:macro template="usips_ncmec_macros" name="incident_list" arg-incidents="{$incidents}" />
				<xf:else />
				<div class="block-row">{{ phrase('no_results_found') }}</div>
			</xf:if>
		</div>
		<xf:if is="$incidents is not empty">
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter">{{ display_totals($incidents, $total) }}</span>
				<span class="block-footer-select">
					<xf:checkbox standalone="true">
						<xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" />
					</xf:checkbox>
				</span>
				<span class="block-footer-controls">
					<xf:button type="submit" name="assign_case" icon="merge">{{
						phrase('usips_ncmec_assign_case') }}</xf:button>
				</span>
			</div>
		</xf:if>
	</div>
	<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}" link="ncmec-incidents"
		wrapperclass="block-outer block-outer--after" />
</xf:form>